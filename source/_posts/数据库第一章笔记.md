---
title: 数据库系统概念第一章——引言笔记
date: 2020-08-08 14:19:40
tags: [database,数据库系统概念]
---

# 第一章 引言

## 1. 文件系统的弊端&数据库系统的目标

### 	1.1 数据的冗余与不一致

​		冗余性指的是相同的数据在不同的地方重复存储。

​		不一致性指的是同一数据的副本不一致。

### 	1.2 数据访问困难

​		传统的文件系统并不提供查询、修改数据的统一接口，当需求变化时，我们要编写新的查询程序。而在数据库中，我们可以通过数据操纵语言更高效便捷地查询/修改我们想要的数据。

### 	1.3 数据孤立

​		数据分散在文件系统的各个角落，很难对其进行统一处理。

### 	1.4 完整性问题

​		数据库中的某些数据需要满足一些条件（比如账户余额不能为负数），这也被称为**一致性约束**。

### 	1.5 原子性问题

​		数据库系统为我们提供了事物（transcation）机制，可以保证事物的原子性（要么都做，要么都不做）；而文件系统是非常难做到原子性的。

### 	1.6 并发访问

​		并发访问指的是多个用户同时对数据进行操作（包括修改、查询等），绝大多数文件系统是不支持并发访问的。

### 	1.7 安全性问题

​		主要是指权限系统，即不同权限的用户能够访问的数据范围是不同的。



## 2. 数据视图（三级模式）

### 	2.1 物理模式

​		物理模式（physical level）又被称为“内模式“。它描述的是数据究竟是以什么样的形式存储的。

​		比如说有如下mysql定义：

```mysql
create table instructor(
	ID char(5),
    name varchar(20),
    dept_name varchar(50),
    salary numeric(8,2)
);
```

​		`instructor`在数据库底层被描述成一个存储块，里面包含ID，name，dept_name等字段，同时还有填充字节等等。

### 	2.2 逻辑模式

​		逻辑模式（logical level）又被称为“概念模式”/“模式”。它描述了数据库中存储了什么数据、数据与数据之间的关系（外键约束等）。比如说我们要设计一个大学的数据库，这个数据库中就应当包含学生、课程等信息。

### 	2.3 视图层

​		视图层（viewl level）又被称为“用户模式”/“外模式”/“子模式”。它向用户展示了数据库的一小部分，所以一个数据库系统可以对应多个视图。比如说我们在sql中查询某位学生的信息，这样的查询请求可以被同时接受处理，每个用户看到的都是数据库中的一小部分。

### 	2.4 三级模式两级映射

​		![](E:\blog\Myblog\source\_posts\数据库第一章笔记\1.jpg)



## 3. 数据库语言

### 	3.1 数据定义语言（DDL）

​		用于描述数据库的模式，它主要涉及到以下4个方面：

1. 定义域约束：描述属性的取值范围。（比如性别属性只能取M或F）
2. 参照完整性：主要体现于“外键约束“这一概念。
3. 断言：类似C/C++中的assertion，相当于一个不变式，如果违反断言则对数据库的操作无效。
4. 授权：不同用户对不同的数据有着不同的权限（插入/删除/更新等等）。



### 	3.2 数据操纵语言(DML)

​		对数据库内的数据进行增删改查。

#### 		3.2.1 过程化DML

​		它要用户指定需要什么数据，并且如何得到它们。

#### 		3.2.2 声明式DML

​		它只要求用户指定需要什么数据，怎么获得数据由数据库想办法**（SQL就是典型的声明式DML）**。

​		SQL并非图灵机等价的语言（也就是说有一部分需求是无法用SQL表示的），因此它常常被嵌入在Java、C++等高级语言中。



## 4. 数据库设计

​		数据库绝不是程序员一拍脑袋就出来的，因为数据库模式不能轻易更改，数据库的设计直接影响了数据查询/修改的效率。一个糟糕的数据库设计会导致大量的数据冗余。

### 	4.1 概念设计（核心）

​		这一阶段根据用户的需求，决定数据库中应该包含哪些属性、如何将这些属性组织到多个表中。在这一阶段会用到**E-R图**和**规范化**两个设计工具。

### 	4.2  逻辑设计

​		将概念模式映射到相应的数据模型上。

### 	4.3 物理设计

​		根据数据的特点，设计数据在底层如何存储，确定底层数据结构。



## 5. 数据的存储和查询

### 	5.1 存储管理器

​		存储管理器与底层数据存储打交道，因为数据最终依然存储在磁盘文件系统中。

​		存储管理器包括：

- 权限及完整性管理器

- 事物管理器

- 文件管理器

- 缓冲区管理器

  存储管理器实现了如下数据结构：

- 数据文件：存储数据库本身

- 数据字典：存储元数据（定义数据的数据），尤其是数据库模式

- 索引

  ### 5.2 查询处理器

  用于处理数据库的查询命令，它包括以下三个部分：

- DDL解释器：将数据定义语句记录在数据字典中

- DDL编译器：将查询语句（如SQL中的select）转换为一套实际的查询方案，在这一过程中会进行**查询优化**，并且将它转化为低级指令。

- 查询执行引擎：执行由编译器生成的低级指令。

![](E:\blog\Myblog\source\_posts\数据库第一章笔记\4.png)

## 6. 事物管理

### 	6.1 事物的ACID属性

​		ACID属性分别表示的是：原子性、一致性、完整性、持久性

### 	6.2 恢复管理器

​		在没有故障发生的时候，保证原子性很容易。但是当有故障发生时，事物不应该对数据库产生任何影响。所以数据库必须被恢复到事物开始前的状态（又被称为回滚rollback），这是数据库中恢复管理器（recovery manager）的职责。

### 	6.3 并发控制管理器

​		当有多个事物同时对事物进行更新时，即使保证每个事物都是正确的，数据的一致性仍有可能被破坏。并发控制管理器（concurrency-control manager）控制并发事物之间的相互影响，保证数据库的一致性。



## 7. 数据库体系结构

### 	7.1 数据库内部结构

![](E:\blog\Myblog\source\_posts\数据库第一章笔记\2.png)

### 	7.2 带数据库的应用结构

![](E:\blog\Myblog\source\_posts\数据库第一章笔记\3.png)

### 	7.3 用户结构

![](E:\blog\Myblog\source\_posts\数据库第一章笔记\5.png)